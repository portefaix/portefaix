# port

![Version: 1.0.0](https://img.shields.io/badge/Version-1.0.0-informational?style=flat-square) ![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![AppVersion: 1.0.0](https://img.shields.io/badge/AppVersion-1.0.0-informational?style=flat-square)

## Requirements

| Repository | Name | Version |
|------------|------|---------|
| https://port-labs.github.io/helm-charts | port-k8s-exporter | 0.2.33 |
| https://port-labs.github.io/helm-charts | port-ocean-argo-cd(port-ocean) | 0.5.2 |
| https://port-labs.github.io/helm-charts | port-ocean-terraform-cloud(port-ocean) | 0.5.2 |

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| port-k8s-exporter.configMap.config | string | `"resources:\n- kind: v1/namespaces # group/version/resource (G/V/R) format\n  selector:\n    query: .metadata.name | startswith(\"kube\") | not # JQ boolean query. If evaluated to false - skip syncing the object.\n  port:\n    entity:\n      mappings: # Mappings between one K8s object to one or many Port Entities. Each value is a JQ query.\n        - identifier: .metadata.name + \"-\" + env.CLUSTER_NAME\n          title: .metadata.name\n          blueprint: '\"namespace\"'\n          properties:\n            creationTimestamp: .metadata.creationTimestamp\n            labels: .metadata.labels\n          relations:\n            Cluster: 'env.CLUSTER_NAME'\n\n- kind: v1/namespaces\n  selector:\n    query: .metadata.name | contains(\"kube-system\")\n  port:\n    entity:\n      mappings:\n        - identifier: env.CLUSTER_NAME\n          title: env.CLUSTER_NAME\n          blueprint: '\"cluster\"'\n\n- kind: apps/v1/deployments\n  selector:\n    query: .metadata.namespace | startswith(\"kube\") | not\n  port:\n    entity:\n      mappings:\n        - identifier: .metadata.name + \"-Deployment-\" + .metadata.namespace + \"-\" + env.CLUSTER_NAME\n          title: .metadata.name\n          icon: '\"Deployment\"'\n          blueprint: '\"workload\"'\n          properties:\n            kind: '\"Deployment\"'\n            creationTimestamp: .metadata.creationTimestamp\n            replicas: .spec.replicas\n            hasPrivileged: .spec.template.spec.containers | [.[].securityContext.privileged] | any\n            hasLatest: .spec.template.spec.containers[].image | contains(\":latest\")\n            hasLimits: .spec.template.spec.containers | all(has(\"resources\") and (.resources.limits.memory and .resources.limits.cpu))\n            strategyConfig: .spec.strategy // {}\n            strategy: .spec.strategy.type\n            availableReplicas: .status.availableReplicas\n            labels: .metadata.labels\n            containers: (.spec.template.spec.containers | map({name, image, resources}))\n            isHealthy: if .spec.replicas == .status.availableReplicas then \"Healthy\" else \"Unhealthy\" end\n          relations:\n            Namespace: .metadata.namespace + \"-\" + env.CLUSTER_NAME\n\n- kind: apps/v1/daemonsets \n  selector:\n    query: .metadata.namespace | startswith(\"kube\") | not \n  port:\n    entity:\n      mappings:\n        - identifier: .metadata.name + \"-DaemonSet-\" + .metadata.namespace + \"-\" + env.CLUSTER_NAME\n          title: .metadata.name\n          blueprint: '\"workload\"'\n          properties:\n            kind: '\"DaemonSet\"'\n            creationTimestamp: .metadata.creationTimestamp         \n            replicas: .spec.replicas\n            strategyConfig: .spec.strategy // {}\n            availableReplicas: .status.availableReplicas\n            hasPrivileged: .spec.template.spec.containers | [.[].securityContext.privileged] | any\n            labels: .metadata.labels\n            hasLatest: .spec.template.spec.containers[].image | contains(\":latest\")\n            hasLimits: .spec.template.spec.containers | all(has(\"resources\") and (.resources.limits.memory and .resources.limits.cpu))\n            containers: (.spec.template.spec.containers | map({name, image, resources}))\n            isHealthy: if .spec.replicas == .status.availableReplicas then \"Healthy\" else \"Unhealthy\" end\n          relations:\n            Namespace: .metadata.namespace + \"-\" + env.CLUSTER_NAME\n\n- kind: apps/v1/statefulsets\n  selector:\n    query: .metadata.namespace | startswith(\"kube\") | not\n  port:\n    entity:\n      mappings: \n        - identifier: .metadata.name + \"-StatefulSet-\" + .metadata.namespace + \"-\" + env.CLUSTER_NAME\n          title: .metadata.name\n          blueprint: '\"workload\"'\n          properties:\n            kind: '\"StatefulSet\"'\n            labels: .metadata.labels\n            creationTimestamp: .metadata.creationTimestamp\n            strategyConfig: .spec.strategy // {}\n            replicas: .spec.replicas\n            availableReplicas: .status.availableReplicas\n            hasLatest: .spec.template.spec.containers[].image | contains(\":latest\")\n            hasPrivileged: .spec.template.spec.containers | [.[].securityContext.privileged] | any\n            hasLimits: .spec.template.spec.containers | all(has(\"resources\") and (.resources.limits.memory and .resources.limits.cpu))\n            containers: (.spec.template.spec.containers | map({name, image, resources}))\n            isHealthy: if .spec.replicas == .status.availableReplicas then \"Healthy\" else \"Unhealthy\" end\n          relations:\n            Namespace: .metadata.namespace + \"-\" + env.CLUSTER_NAME\n\n- kind: apps/v1/replicasets\n  selector:\n    query: .metadata.namespace | startswith(\"kube\") | not\n  port:\n    entity:\n      mappings:\n        - identifier: .metadata.name + \"-ReplicaSet-\" + .metadata.namespace + \"-\" + env.CLUSTER_NAME\n          title: .metadata.name\n          icon: '\"Deployment\"'\n          blueprint: '\"replicaSet\"'\n          properties:\n            creationTimestamp: .metadata.creationTimestamp\n            replicas: .spec.replicas\n            hasPrivileged: .spec.template.spec.containers | [.[].securityContext.privileged] | any\n            hasLatest: .spec.template.spec.containers[].image | contains(\":latest\")\n            hasLimits: .spec.template.spec.containers | all(has(\"resources\") and (.resources.limits.memory and .resources.limits.cpu))\n            strategy: .spec.strategy.type // \"\"\n            availableReplicas: .status.availableReplicas\n            labels: .metadata.labels\n            containers: (.spec.template.spec.containers | map({name, image, resources}))\n            isHealthy: if .spec.replicas == .status.availableReplicas then \"Healthy\" else \"Unhealthy\" end\n          relations:\n            replicaSetManager: .metadata.ownerReferences[0].name + \"-\" + .metadata.ownerReferences[0].kind + \"-\" + .metadata.namespace + \"-\" + env.CLUSTER_NAME // []\n\n# Pods who are owned by replica-sets are connected directly to their deployment\n- kind: v1/pods\n  selector:\n    query: (.metadata.ownerReferences[0].kind == \"ReplicaSet\") and (.metadata.namespace | startswith(\"kube\") | not)\n  port:\n    entity:\n      mappings:\n        - identifier: .metadata.name + \"-\" + .metadata.namespace + \"-\" + env.CLUSTER_NAME\n          title: .metadata.name\n          icon: '\"Microservices\"'\n          blueprint: '\"pod\"'\n          properties:\n            startTime: .status.startTime\n            phase: .status.phase\n            labels: .metadata.labels\n            containers: (.spec.containers | map({image, resources})) + .status.containerStatuses | group_by(.image) | map(add)\n          relations:\n            replicaSet: .metadata.ownerReferences[0].name + \"-\" + \"ReplicaSet\" + \"-\" + .metadata.namespace + \"-\" + env.CLUSTER_NAME\n            Node: (.spec.nodeName) | (split(\".\")|join(\"_\")) + \"-\" + env.CLUSTER_NAME // \"\"\n\n\n# Pods that are not managed by replicasets->deployments (daemonsets, statefulsets etc)\n- kind: v1/pods\n  selector:\n    query: (.metadata.ownerReferences[0].kind != \"ReplicaSet\") and (.metadata.namespace | startswith(\"kube\") | not)\n  port:\n    entity:\n      mappings:\n        - identifier: .metadata.name + \"-\" + .metadata.namespace + \"-\" + env.CLUSTER_NAME\n          title: .metadata.name\n          icon: '\"Microservices\"'\n          blueprint: '\"pod\"'\n          properties:\n            startTime: .status.startTime\n            phase: .status.phase\n            labels: .metadata.labels\n            containers: (.spec.containers | map({image, resources})) + .status.containerStatuses | group_by(.image) | map(add)\n          relations:\n            workload: .metadata.ownerReferences[0].name + \"-\" + .metadata.ownerReferences[0].kind + \"-\" + .metadata.namespace + \"-\" + env.CLUSTER_NAME\n            Node: (.spec.nodeName) | (split(\".\")|join(\"_\")) + \"-\" + env.CLUSTER_NAME\n            \n- kind: v1/nodes\n  port:\n    entity:\n      mappings:\n        - identifier: (.metadata.name) | (split(\".\")|join(\"_\")) + \"-\" + env.CLUSTER_NAME\n          title: .metadata.name + \"-\" + env.CLUSTER_NAME\n          icon: '\"Node\"'\n          blueprint: '\"node\"'\n          properties:\n            creationTimestamp: .metadata.creationTimestamp\n            totalCPU: .status.allocatable.cpu\n            totalMemory: .status.allocatable.memory\n            labels: .metadata.labels\n            kubeletVersion: .status.nodeInfo.kubeletVersion | split(\"-\") | .[0]\n            ready: .status.conditions[] | select(.type == \"Ready\") | .status\n          relations:\n            Cluster: env.CLUSTER_NAME\n"` |  |
| port-k8s-exporter.extraLabels."portefaix.xyz/version" | string | `"v0.54.0"` |  |
| port-k8s-exporter.portBaseUrl | string | `"https://api.getport.io"` |  |
| port-k8s-exporter.secret.name | string | `"port-k8s-credentials"` |  |
| port-k8s-exporter.secret.useExistingSecret | bool | `true` |  |
| port-ocean-argo-cd.extraLabels."portefaix.xyz/version" | string | `"v0.54.0"` |  |
| port-ocean-argo-cd.port.baseUrl | string | `"https://api.getport.io"` |  |
| port-ocean-argo-cd.secret.create | bool | `false` |  |
| port-ocean-argo-cd.secret.name | string | `"port-ocean-argocd-credentials"` |  |
| port-ocean-terraform-cloud.extraLabels."portefaix.xyz/version" | string | `"v0.54.0"` |  |
| port-ocean-terraform-cloud.port.baseUrl | string | `"https://api.getport.io"` |  |
| port-ocean-terraform-cloud.secret.create | bool | `false` |  |
| port-ocean-terraform-cloud.secret.name | string | `"port-ocean-terraform-credentials"` |  |

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.11.0](https://github.com/norwoodj/helm-docs/releases/v1.11.0)
